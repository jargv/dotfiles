#!/usr/bin/env bash
set -euo pipefail
set -m #job control

starting_window=$(xdotool getactivewindow)
echo $starting_window

${@} &
app_pid=$!

sleep 0.3

wmctrl -l -p | awk -e '{print $1,$3}' | while read wid pid; do
  if [[ "$pid" == "$app_pid" ]]; then
    echo "found pid $pid $wid $starting_window"
    wmctrl -i -r $wid -b add,above
    wmctrl -i -a $starting_window
  fi
done;

wait $app_pid
